fun int f(*[[int]] a) = a[0,0]

fun int main() =
    let n = 10 in
    let a = replicate(n, iota(n)) in
    let b = replicate(n, iota(n)) in
    loop (a) = for i < n do
                 let a[i] = b[i] in a // Aliases a to b.
               in
    let x = f(b) in // Consumes both b and a, because a is aliased to b.
    a[0,0] // Should fail.
